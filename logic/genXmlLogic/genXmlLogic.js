"use strict";
const xml_generator = require("../utils/gen_xml");

function generar_FE_XML_base64(clave,
    codigo_actividad,
    consecutivo,
    fecha_emision,
    nombre_emisor,
    tipo_id_emisor,
    numero_id_emisor,
    nombre_comercial,
    provincia_emisor,
    canton_emisor,
    distrito_emisor,
    barrio_emisor,
    senas_emisor,
    codigo_pais_emisor,
    telefono_emisor,
    correo_emisor,
    nombre_receptor,
    tipo_id_receptor,
    numero_id_receptor,
    provincia_receptor,
    canton_receptor,
    distrito_receptor,
    senas_receptor,
    codigo_pais_receptor,
    telefono_receptor,
    correo_receptor,
    codigo_venta,
    medio_pago,
    codigo_moneda,
    tipo_cambio,
    total_serv_gravados,
    total_serv_exentos,
    total_serv_exonerado,
    total_mercancias_gravadas,
    total_mercancias_exentas,
    total_merc_exonerada,
    total_gravado,
    total_exento,
    total_exonerado,
    total_venta,
    total_descuentos,
    total_venta_neta,
    total_impuesto,
    total_IVA_devuelto,
    total_comprobante,
    detalles){

    let xml_string = xml_generator.generate_FE_xml(
        clave,
        codigo_actividad,
        consecutivo,
        fecha_emision,
        nombre_emisor,
        tipo_id_emisor,
        numero_id_emisor,
        nombre_comercial,
        provincia_emisor,
        canton_emisor,
        distrito_emisor,
        barrio_emisor,
        senas_emisor,
        codigo_pais_emisor,
        telefono_emisor,
        correo_emisor,
        nombre_receptor,
        tipo_id_receptor,
        numero_id_receptor,
        provincia_receptor,
        canton_receptor,
        distrito_receptor,
        senas_receptor,
        codigo_pais_receptor,
        telefono_receptor,
        correo_receptor,
        codigo_venta,
        medio_pago,
        codigo_moneda,
        tipo_cambio,
        total_serv_gravados,
        total_serv_exentos,
        total_serv_exonerado,
        total_mercancias_gravadas,
        total_mercancias_exentas,
        total_merc_exonerada,
        total_gravado,
        total_exento,
        total_exonerado,
        total_venta,
        total_descuentos,
        total_venta_neta,
        total_impuesto,
        total_IVA_devuelto,
        total_comprobante,
        detalles
    );

    return Buffer.from(xml_string).toString('base64');

}

function generar_FE_XML_raw(clave,
    codigo_actividad,
    consecutivo,
    fecha_emision,
    nombre_emisor,
    tipo_id_emisor,
    numero_id_emisor,
    nombre_comercial,
    provincia_emisor,
    canton_emisor,
    distrito_emisor,
    barrio_emisor,
    senas_emisor,
    codigo_pais_emisor,
    telefono_emisor,
    correo_emisor,
    nombre_receptor,
    tipo_id_receptor,
    numero_id_receptor,
    provincia_receptor,
    canton_receptor,
    distrito_receptor,
    senas_receptor,
    codigo_pais_receptor,
    telefono_receptor,
    correo_receptor,
    codigo_venta,
    medio_pago,
    codigo_moneda,
    tipo_cambio,
    total_serv_gravados,
    total_serv_exentos,
    total_serv_exonerado,
    total_mercancias_gravadas,
    total_mercancias_exentas,
    total_merc_exonerada,
    total_gravado,
    total_exento,
    total_exonerado,
    total_venta,
    total_descuentos,
    total_venta_neta,
    total_impuesto,
    total_IVA_devuelto,
    total_comprobante,
    detalles){

    return xml_generator.generate_FE_xml(
        clave,
        codigo_actividad,
        consecutivo,
        fecha_emision,
        nombre_emisor,
        tipo_id_emisor,
        numero_id_emisor,
        nombre_comercial,
        provincia_emisor,
        canton_emisor,
        distrito_emisor,
        barrio_emisor,
        senas_emisor,
        codigo_pais_emisor,
        telefono_emisor,
        correo_emisor,
        nombre_receptor,
        tipo_id_receptor,
        numero_id_receptor,
        provincia_receptor,
        canton_receptor,
        distrito_receptor,
        senas_receptor,
        codigo_pais_receptor,
        telefono_receptor,
        correo_receptor,
        codigo_venta,
        medio_pago,
        codigo_moneda,
        tipo_cambio,
        total_serv_gravados,
        total_serv_exentos,
        total_serv_exonerado,
        total_mercancias_gravadas,
        total_mercancias_exentas,
        total_merc_exonerada,
        total_gravado,
        total_exento,
        total_exonerado,
        total_venta,
        total_descuentos,
        total_venta_neta,
        total_impuesto,
        total_IVA_devuelto,
        total_comprobante,
        detalles
    );
}


module.exports = {
    generar_FE_XML_base64,
    generar_FE_XML_raw
};
